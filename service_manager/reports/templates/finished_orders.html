{% extends 'base.html' %}
{% block content %}
    <div class="d-block mt-5 rounded-lg bg-light my-3" style="padding:2%">
        <h2 class='text-center text-secondary mb-3'>Finished Service Orders</h2>
        {#    Filter results#}
        <div class="container-fluid my-3">
            <form class="form-inline" method="GET" action="">
                {% csrf_token %}
                <label class="m-2" for="from_date">From:</label>
                <input class="form-control m-2" id="from_date" name="from" width="250" type="date" required/>
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <label class="m-2" for="to_date">To:</label>
                <input class="form-control m-2" id="to_date" name="to" width="250" type="date" required/>
                <i class="fa fa-calendar" aria-hidden="true"></i>
                <button type="submit" class="btn btn-outline-primary m-2" href="{% url 'customers_list' %}">filter
                </button>
            </form>
        </div>
        <table class="table table-striped text-center">
            <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Category</th>
                <th scope="col">Brand</th>
                <th scope="col">Model Name</th>
                <th scope="col">Model Number</th>
                <th scope="col">Serial Number</th>
                <th scope="col">Product Number</th>
                <th scope="col">Accepted On</th>
                <th scope="col">Serviced On</th>
                <th scope="col">Returned On</th>
                <th scope="col">Action</th>

            </tr>
            </thead>
            <tbody>
            {% if object_list %}
                {% for service_order in object_list %}
                    <tr>
                        <td>{{ service_order.id }}</td>
                        <td>{{ service_order.customer.name }}</td>
                        <td>{{ service_order.customer_asset.asset.category.name }}</td>
                        <td>{{ service_order.customer_asset.asset.brand.name }}</td>
                        <td>{{ service_order.customer_asset.asset.model_name }}</td>
                        <td>{{ service_order.customer_asset.asset.model_number }}</td>
                        <td>{{ service_order.customer_asset.serial_number }}</td>
                        <td>{{ service_order.customer_asset.product_number }}</td>
                        <td>{{ service_order.created_on }}</td>
                        <td>{{ service_order.serviced_on }}</td>
                        <td>{{ service_order.completed_on }}</td>
                        <td>
                            <a class="btn btn-outline-primary btn-sm"
                               href="{% url 'detail_service_order' service_order.id %}"
                               role="button">Detail</a>
                    </tr>
                {% endfor %}
            {% endif %}
            </tbody>
        </table>
    </div>
{% endblock %}