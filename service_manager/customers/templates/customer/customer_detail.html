{% extends 'base.html' %}
{% block content %}
    <div class="d-block mt-5" style="background-color: #d7d5d5; padding:2%">
        <h2 class='text-center'>Customer Information</h2>
        <div class="row">
            <div class="col-sm-6">
                <p><u>Name:</u> {{ object.name }}</p>
                <p><u>Type:</u> {{ object.type.name }}</p>
                <p><u>VAT:</u> {{ object.vat }}</p>
            </div>
            <div class="col-sm-6">
                <p><u>Email:</u> {{ object.email_address }}</p>
                <p><u>Phone:</u> {{ object.phone_number }}</p>
                <a class="btn btn-outline-primary btn-sm" href="{% url 'edit_customer' object.id %}"
                   role="button">Edit</a>
            </div>
        </div>
    </div>

    <div id="category_tabs">
        <ul class="nav nav-tabs">

            <li class="nav-item">
                <a class="nav-link active" id="test"
                   href="{% url 'customer_detail' object.pk %}?show_assets">Assets</a>
            </li>

            <li class="nav-item">
                <a class="nav-link"
                   href="{% url 'customer_detail' object.pk %}?show_representatives">Representatives</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="{% url 'customer_detail' object.pk %}?show_departments">Departments</a>
            </li>

        </ul>
    </div>

    {% if 'show_assets' in request.GET %}
        {% include 'customer_asset/customer_assets.html' %}
    {% elif 'show_representatives' in request.GET %}
        {% include 'customer_representatives/customer_representatives.html' %}
    {% elif 'show_departments' in request.GET %}
        {% include 'customer_department/customer_departments.html' %}
    {% endif %}
    <script>
        let triggerTabList = [].slice.call(document.querySelectorAll('#category_tabs a'))
        triggerTabList.forEach(function (triggerEl) {
            let tabTrigger = new bootstrap.Tab(triggerEl)

            triggerEl.addEventListener('click', function (event) {
                event.preventDefault()
                tabTrigger.show()
            })
        })
    </script>
{% endblock %}